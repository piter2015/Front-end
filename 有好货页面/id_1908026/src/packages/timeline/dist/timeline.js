!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("core-js/modules/es7.symbol.async-iterator"),require("core-js/modules/es6.symbol"),require("core-js/modules/web.dom.iterable"),require("core-js/modules/es6.date.now")):"function"==typeof define&&define.amd?define(["exports","core-js/modules/es7.symbol.async-iterator","core-js/modules/es6.symbol","core-js/modules/web.dom.iterable","core-js/modules/es6.date.now"],e):e((t=t||self).timeline={})}(this,(function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function s(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t}function n(t,e,i,s){var n=1e-6,r=3*t-3*i+1,a=3*i-6*t,u=3*t,h=3*e-3*s+1,o=3*s-6*e,_=3*e;function l(t){return((r*t+a)*t+u)*t}return function(t){return function(t){return((h*t+o)*t+_)*t}(function(t){for(var e,i,s,h=t,o=0;o<8;o++){if(i=l(h)-t,Math.abs(i)<n)return h;if(e=(3*r*(s=h)+2*a)*s+u,Math.abs(e)<n)break;h-=i/e}var _=1,c=0;for(h=t;_>c;){if(i=l(h)-t,Math.abs(i)<n)return h;i>0?_=h:c=h,h=(_+c)/2}return h}(t))}}var r=n(0,0,1,1),a=n(.25,.1,.25,1),u=n(.42,0,1,1),h=n(0,0,.58,1),o=n(.42,0,.58,1),_=function(){function t(i,s,n,r,a,u,h){e(this,t),this._el=i,this._property=s,this._startTime=n,this._startValue=r,this._endTime=a,this._endValue=u,this._converter=h,this._needFixKeyFrame=!1,this._finish=!1}return s(t,[{key:"tick",value:function(t){if(t>=this._endTime){if(!this._needFixKeyFrame)return;t=this._endTime,this._needFixKeyFrame=!1,this._finish=!0}else if(t<=this._startTime){if(!this._needFixKeyFrame)return;t=this._startTime,this._needFixKeyFrame=!1,this._finish=!0}else this._needFixKeyFrame=!0;this._el.style[this._property]=this._converter(a((t-this._startTime)/(this._endTime-this._startTime))*(this._endValue-this._startValue)+this._startValue)}},{key:"finish",get:function(){return this._finish}}]),t}(),l=function(){function t(i,s,n,r,a,u,h){e(this,t),this._el=i,this._property=s,this._startTime=n,this._startValue=r,this._endTime=a,this._endValue=u,this._converter=h,this._needFixKeyFrame=!1,this._finish=!1}return s(t,[{key:"tick",value:function(t){if(t>=this._endTime){if(!this._needFixKeyFrame)return;t=this._endTime,this._needFixKeyFrame=!1,this._finish=!0}else if(t<=this._startTime){if(!this._needFixKeyFrame)return;t=this._startTime,this._needFixKeyFrame=!1,this._finish=!0}else this._needFixKeyFrame=!0;for(var e=(t-this._startTime)/(this._endTime-this._startTime),i=[],s=0;s<this._endValue.length;s++)i[s]=a(e)*(this._endValue[s]-this._startValue[s])+this._startValue[s];this._el.style[this._property]=this._converter(i)}},{key:"finish",get:function(){return this._finish}}]),t}(),c=function(){function t(){e(this,t),this._animations=[],this._pauseTime=0,this._rate=1,this._startPoint=0,this.status="inited",this._startTime=null,this.num=0}return s(t,[{key:"start",value:function(){var t=this;if("started"!==this.status){this.status="started",this._startTime||(this._startTime=Date.now());var e=Date.now();this._tick=function(){var i=!0,s=!1,n=void 0;try{for(var r,a=t._animations[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){var u=r.value;u.finish||u.tick((Date.now()-e-t._pauseTime)*t._rate+t._startPoint)}}catch(t){s=!0,n=t}finally{try{i||null==a.return||a.return()}finally{if(s)throw n}}t._tick&&requestAnimationFrame(t._tick)},requestAnimationFrame(this._tick)}}},{key:"restart",value:function(){var t=this;this._tick&&(this._tick=null,this._resumeTick=null),this._startTime=null,this.status="inited",0===this.num&&requestAnimationFrame((function(){t.start()}))}},{key:"pause",value:function(){"started"===this.status&&(this._pauseStart=Date.now(),this.status="paused",this._resumeTick=this._tick,this._tick=null)}},{key:"remuse",value:function(){"paused"===this.status&&(this.status="started",this._pauseTime+=Date.now()-this._pauseStart,this._tick=this._resumeTick,requestAnimationFrame(this._tick))}},{key:"addAnimation",value:function(t){this._animations.push(t)}},{key:"clearAnimations",value:function(){this._animations=[]}},{key:"clearTick",value:function(){this._tick&&(this._tick=null,this._resumeTick=null)}},{key:"startPoint",set:function(t){this._startPoint=t},get:function(){return this._startPoint}},{key:"rate",set:function(t){this._rate=t},get:function(){return this._rate}}]),t}();t.StyleNumberAnimation=_,t.StyleVectorAnimation=l,t.default=c,t.ease=a,t.easeIn=u,t.easeInOut=o,t.easeOut=h,t.linear=r,Object.defineProperty(t,"__esModule",{value:!0})}));
