import"core-js/modules/es7.symbol.async-iterator";import"core-js/modules/es6.symbol";import"core-js/modules/web.dom.iterable";import"core-js/modules/es6.date.now";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function e(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t}function s(t,i,e,s){var n=1e-6,r=3*t-3*e+1,a=3*e-6*t,h=3*t,u=3*i-3*s+1,_=3*s-6*i,o=3*i;function l(t){return((r*t+a)*t+h)*t}return function(t){return function(t){return((u*t+_)*t+o)*t}(function(t){for(var i,e,s,u=t,_=0;_<8;_++){if(e=l(u)-t,Math.abs(e)<n)return u;if(i=(3*r*(s=u)+2*a)*s+h,Math.abs(i)<n)break;u-=e/i}var o=1,m=0;for(u=t;o>m;){if(e=l(u)-t,Math.abs(e)<n)return u;e>0?o=u:m=u,u=(o+m)/2}return u}(t))}}var n=s(0,0,1,1),r=s(.25,.1,.25,1),a=s(.42,0,1,1),h=s(0,0,.58,1),u=s(.42,0,.58,1),_=function(){function i(e,s,n,r,a,h,u){t(this,i),this._el=e,this._property=s,this._startTime=n,this._startValue=r,this._endTime=a,this._endValue=h,this._converter=u,this._needFixKeyFrame=!1,this._finish=!1}return e(i,[{key:"tick",value:function(t){if(t>=this._endTime){if(!this._needFixKeyFrame)return;t=this._endTime,this._needFixKeyFrame=!1,this._finish=!0}else if(t<=this._startTime){if(!this._needFixKeyFrame)return;t=this._startTime,this._needFixKeyFrame=!1,this._finish=!0}else this._needFixKeyFrame=!0;this._el.style[this._property]=this._converter(r((t-this._startTime)/(this._endTime-this._startTime))*(this._endValue-this._startValue)+this._startValue)}},{key:"finish",get:function(){return this._finish}}]),i}(),o=function(){function i(e,s,n,r,a,h,u){t(this,i),this._el=e,this._property=s,this._startTime=n,this._startValue=r,this._endTime=a,this._endValue=h,this._converter=u,this._needFixKeyFrame=!1,this._finish=!1}return e(i,[{key:"tick",value:function(t){if(t>=this._endTime){if(!this._needFixKeyFrame)return;t=this._endTime,this._needFixKeyFrame=!1,this._finish=!0}else if(t<=this._startTime){if(!this._needFixKeyFrame)return;t=this._startTime,this._needFixKeyFrame=!1,this._finish=!0}else this._needFixKeyFrame=!0;for(var i=(t-this._startTime)/(this._endTime-this._startTime),e=[],s=0;s<this._endValue.length;s++)e[s]=r(i)*(this._endValue[s]-this._startValue[s])+this._startValue[s];this._el.style[this._property]=this._converter(e)}},{key:"finish",get:function(){return this._finish}}]),i}(),l=function(){function i(){t(this,i),this._animations=[],this._pauseTime=0,this._rate=1,this._startPoint=0,this.status="inited",this._startTime=null,this.num=0}return e(i,[{key:"start",value:function(){var t=this;if("started"!==this.status){this.status="started",this._startTime||(this._startTime=Date.now());var i=Date.now();this._tick=function(){var e=!0,s=!1,n=void 0;try{for(var r,a=t._animations[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var h=r.value;h.finish||h.tick((Date.now()-i-t._pauseTime)*t._rate+t._startPoint)}}catch(t){s=!0,n=t}finally{try{e||null==a.return||a.return()}finally{if(s)throw n}}t._tick&&requestAnimationFrame(t._tick)},requestAnimationFrame(this._tick)}}},{key:"restart",value:function(){var t=this;this._tick&&(this._tick=null,this._resumeTick=null),this._startTime=null,this.status="inited",0===this.num&&requestAnimationFrame((function(){t.start()}))}},{key:"pause",value:function(){"started"===this.status&&(this._pauseStart=Date.now(),this.status="paused",this._resumeTick=this._tick,this._tick=null)}},{key:"remuse",value:function(){"paused"===this.status&&(this.status="started",this._pauseTime+=Date.now()-this._pauseStart,this._tick=this._resumeTick,requestAnimationFrame(this._tick))}},{key:"addAnimation",value:function(t){this._animations.push(t)}},{key:"clearAnimations",value:function(){this._animations=[]}},{key:"clearTick",value:function(){this._tick&&(this._tick=null,this._resumeTick=null)}},{key:"startPoint",set:function(t){this._startPoint=t},get:function(){return this._startPoint}},{key:"rate",set:function(t){this._rate=t},get:function(){return this._rate}}]),i}();export default l;export{_ as StyleNumberAnimation,o as StyleVectorAnimation,r as ease,a as easeIn,u as easeInOut,h as easeOut,n as linear};
